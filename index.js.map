{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\nconst API_KEY = '49397541-1939e7fe1ba522fc58da934d1';\n\nexport const fetchPhotos = async (query, page, perPage = 9) => {\n  if (!query) return { hits: [], totalHits: 0 };\n\n  const params = {\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    color: 'black',\n    per_page: perPage,\n    page: page,\n  };\n\n  try {\n    const { data } = await axios.get('', { params });\n    return {\n      hits: data.hits.map(\n        ({\n          id,\n          webformatURL,\n          largeImageURL,\n          tags,\n          likes,\n          views,\n          comments,\n          downloads,\n        }) => ({\n          id,\n          webformatURL,\n          largeImageURL,\n          tags,\n          likes,\n          views,\n          comments,\n          downloads,\n        })\n      ),\n      totalHits: data.totalHits,\n    };\n  } catch (error) {\n    console.error('Error fetching photos:', error);\n    return { hits: [], totalHits: 0 };\n  }\n};\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nexport const render = photos => {\n  const gallery = document.querySelector('.gallery');\n  if (photos.length === 0) {\n    gallery.innerHTML = '';\n  }\n\n  const markup = photos\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n        <li class='gallery-item'>\n          <a class='gallery-link' href='${largeImageURL}'>\n            <img class='gallery-image' src='${webformatURL}' alt='${tags}'>\n          </a>\n          <ul class='image-info'>\n            <li><h4>Likes</h4><p>${likes}</p></li>\n            <li><h4>Views</h4><p>${views}</p></li>\n            <li><h4>Comments</h4><p>${comments}</p></li>\n            <li><h4>Downloads</h4><p>${downloads}</p></li>\n          </ul>\n        </li>`\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n  let lightbox = new SimpleLightbox('.gallery a', {\n    close: true,\n    animationSpeed: 250,\n    enableKeyboard: true,\n    showCounter: true,\n    docClose: true,\n    captions: true,\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    captionDelay: 250,\n  });\n};\nexport const loader = type => {\n  const loader = document.querySelector('.loader');\n  if (type === 'add') {\n    loader.classList.remove('is-hidden');\n  } else if (type === 'remove') {\n    loader.classList.add('is-hidden');\n  }\n};\nexport const clearGallery = () => {\n  const gallery = document.querySelector('.gallery');\n  gallery.innerHTML = '';\n};\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { fetchPhotos } from './js/pixabay-api';\nimport { render, loader, clearGallery } from './js/render-functions';\nimport Simplelightbox from 'simplelightbox';\n\nconst lightbox = new Simplelightbox('.js-gallery a');\nlet page = 1;\nlet query = '';\nconst perPage = 15;\nlet totalPages = 0;\nlet totalHits = 0;\n\nconst form = document.querySelector('.form');\nconst loadmore = document.querySelector('.js-loadmore');\n\nconst onSubmit = async event => {\n  event.preventDefault();\n  query = event.target.elements['search-text'].value.trim();\n  page = 1;\n\n  event.target.reset();\n\n  if (!query) {\n    showMessage(\n      'Sorry, there are no images matching your search query. Please try again!',\n      'error'\n    );\n    return;\n  }\n\n  loader('add');\n  loadmore.classList.add('is-hidden');\n\n  clearGallery();\n\n  try {\n    const response = await fetchPhotos(query, page, perPage);\n\n    if (!response.hits.length) {\n      showMessage(\n        'Sorry, there are no images matching your search query. Please try again!',\n        'error'\n      );\n      return;\n    }\n\n    totalHits = response.totalHits;\n    totalPages = Math.ceil(totalHits / perPage);\n    render(response.hits);\n    lightbox.refresh();\n\n    if (totalPages > 1) {\n      loadmore.classList.remove('is-hidden');\n    }\n  } catch (error) {\n    showMessage(`Something went wrong: ${error.message}`, 'error');\n  } finally {\n    loader('remove');\n  }\n};\n\nform.addEventListener('submit', onSubmit);\n\nconst showMessage = (message, type = 'info') => {\n  iziToast[type]({\n    message,\n    position: 'topRight',\n  });\n};\n\nloadmore.addEventListener('click', async () => {\n  page++;\n\n  loadmore.classList.add('is-hidden');\n\n  loader('add');\n\n  try {\n    const response = await fetchPhotos(query, page, perPage);\n    render(response.hits);\n    lightbox.refresh();\n\n    scrollSmoothly();\n\n    if (page >= totalPages) {\n      loadmore.classList.add('is-hidden');\n      showMessage(\n        \"We're sorry, but you've reached the end of search results.\",\n        'info'\n      );\n    } else {\n      loadmore.classList.remove('is-hidden');\n    }\n  } catch (error) {\n    showMessage(`Something went wrong: ${error.message}`, 'error');\n  } finally {\n    loader('remove');\n  }\n});\n\nconst scrollSmoothly = () => {\n  const firstCard = document.querySelector('.gallery-item');\n  if (!firstCard) return;\n\n  const cardHeight = firstCard.getBoundingClientRect().height;\n  window.scrollBy({ top: cardHeight * 2, behavior: 'smooth' });\n};\n"],"names":["axios","API_KEY","fetchPhotos","query","page","perPage","params","data","id","webformatURL","largeImageURL","tags","likes","views","comments","downloads","error","render","photos","gallery","markup","SimpleLightbox","loader","type","clearGallery","lightbox","Simplelightbox","totalPages","totalHits","form","loadmore","onSubmit","event","showMessage","response","message","iziToast","scrollSmoothly","firstCard","cardHeight"],"mappings":"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"}